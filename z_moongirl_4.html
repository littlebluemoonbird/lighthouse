<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Lighthouse</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    :root {
      --stage-w: min(580px, 95vw);
      --stage-h: 240px;
      --ascii-fz: .56rem;
      --frame-ms: 1600;
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      height: 100vh;
      margin: 0;
      padding: 1rem;
      overflow: hidden;
    }

    #title {
      display: flex;
      flex-direction: column;
      gap: .35rem;
      margin-bottom: .5rem;
    }

    #title .line {
      opacity: 0;
      transform: translateY(.35rem);
      animation: revealUp .5s ease forwards;
    }

    #line1 { animation-delay: .6s }
    #line2 { animation-delay: 1.6s }
    #line3 { animation-delay: 2.4s }

    .glow {
      color: #ffd95e;
      text-shadow: 0 0 5px #ffe9aa, 0 0 10px #ffd95e;
    }

    #navigate {
      margin: .6rem 0 1rem;
      opacity: 0;
      visibility: hidden;
      animation: fadeInNav 1.8s ease forwards;
      animation-delay: 1.2s;
    }

    @keyframes fadeInNav {
      to { opacity: 1; visibility: visible; }
    }

    /* Lighthouse container (fades in AFTER nav) */
    #lighthouse-container {
      opacity: 0;
      visibility: hidden;
      animation: fadeInLighthouse 1.2s ease forwards;
      animation-delay: 2.4s;
    }

    @keyframes fadeInLighthouse {
      to {
        opacity: 1;
        visibility: visible;
      }
    }

    .lighthouse-frame {
      width: var(--stage-w);
      height: var(--stage-h);
      display: grid;
      place-items: center;
      padding: 0;
      overflow: visible;
    }

    .lighthouse-canvas {
      position: relative;
      width: 100%;
      height: 100%;
      display: grid;
      place-items: center;
    }

    .lighthouse {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      opacity: 0;
      transition: opacity 0.8s ease;
      z-index: 0;
    }

    .lighthouse.show {
      opacity: 1;
      z-index: 1;
    }

    .lighthouse pre {

      line-height: 1.05;
      white-space: pre;
      margin: 0;
      padding: 0;
      text-align: left;
    }

    @keyframes revealUp {
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width:800px) {
      :root {
        --ascii-fz: .52rem;
        --stage-h: 210px;
      }
    }
  </style>
</head>
<body>

  <!-- title -->
  <div id="title">
    <span id="line1" class="line">so, <span class="glow" id="user-name">...</span></span>
    <span id="line2" class="line">you crossed the fog...</span>
    <span id="line3" class="line">and met all who dwell here.. and brought them joy..</span>
  </div>

  <!-- nav -->
  <div id="navigate">
    <a class="A" href="z_moongirl_5_a.html">but what about you? is the light safe now?</a>
  </div>

  <!-- lighthouse container -->
  <div id="lighthouse-container">
    <div class="lighthouse-frame">
      <div class="lighthouse-canvas">

        <div class="lighthouse"><pre>
      />   フ
nya  |  _  _l
 ong /` ミ_Yノ
     /      |
    /  ヽ   ﾉ
    │  | | | 
 ／￣|   | | |
 | (￣ヽ__ヽ_)__)
 ＼二つ
        </pre></div>

        <div class="lighthouse"><pre>
 .==-.                   .-==.
 \()8`-._   `.   .'   _.-'8()/
 (88"   ::.   \./  .::   "88)  
   \_.'`-::::.(#).::::-'`._/  
     `._... .q(_)p. ..._.'     
       ""-..-'|=|`-..-""
       .""' .'|=|`. `"".
     ,':8(o)./|=|\.(o)8:`.
    (O :8 ::/ \_/ \:: 8: O)
     \O `::/       \::' O/
      ""--'         `--"" 
        </pre></div>

        <div class="lighthouse"><pre>
          ,-.___.-.
       ,-. ^     ^,-.
       \_*._ ' '_.* _/
        /`-.`--' .-'\
   ,--./    `---'    \,--.
   \   |(  )     (  )|   /
    \  | ||       || |  /
     \ | /|\     /|\ | /
     /  \-._     _,-/  \
    //| \\  `---'  // |\\
   /,-.,-.\       /,-.,-.\
  o   o   o      o   o    o
        </pre></div>

        <div class="lighthouse"><pre>
           .-"""-.       
          /=      \      
         |- /~~~\  |     
         |=( ^.^ ) |       
         \__\_=_/__/
          {_______}       
         /` *       `\       
        /= .     [] .=\   
       /  /|ooo     |` \   
      (   )\_______/    )  
       \``\/       \'' /   
       `-| ==    \_|-'    
         /         |     
        |=   >\  __/     
         \   \ |- --|     
          \ __| \___/     
          _{__} _{__}    
          (    )(    ) 
        </pre></div>

        <div class="lighthouse"><pre>
                      /|      __
*             +      / |   ,-~ /             +
     .              Y :|  //  /                . 
         .          | jj /( .^     *
               *    >-"~"-v"              .        
*                  /       Y
   .     .        j^  ^    |     .            +
                 ( ~T~     j                    
      +           >._-' _./         +
               /| ;-"~ _                     
  .           / l/ ,-"~    \    
              \//\/      .- \     
       +       Y        /    Y
               l       I     !
               ]\      _\    /"\
              (" ~----( ~   Y.  )
          ~~~~~~~~~~~~~~~~~~~~~~~~~~
        </pre></div>

        <div class="lighthouse"><pre>
                  _.--"""-,     howdy!
                .'         `\     
               /             \     
               |  /.-.--.-.--.)      
               .\|(_._.__._.__)    
              (   )   0 _ 0   \
     \  /_     `-|     (_)     |       _\  /
     \\/       /`|             |`\       \//
   '-.\\ \/   |  \   \     /   /  |   \/ //.-'
     __\\|    \   '.  '._.'  .'   /    |//__
        \\   .-'.   `'-----'`   .'-.   //
         \\.'    '-._        .-'\   './/
         /`          `'''''')    )    `\
        /                  (    (      ,\
       ;                O  /\    '-..-'/ ;
       |                  (  '.       /  |
       |                O  )   `;---'`   |
       ;                  /__.-'         ;_
   .-''-\               O `             /  '---'-.
         `.                           .'
           '-._                   _.-'
               `"  '  - - -  ' "``
        </pre></div>

      </div>
    </div>
  </div>
<script>
  window.addEventListener('load', function () {
    const frames = Array.from(document.querySelectorAll('.lighthouse'));
    let idx = 0;

    function show(i) {
      frames.forEach(f => f.classList.remove('show'));
      frames[i].classList.add('show');
    }

    show(idx);

    const PER = parseInt(getComputedStyle(document.documentElement)
      .getPropertyValue('--frame-ms').trim()) || 9600;

    console.log("PER from CSS:", PER); // check in console

    setInterval(() => {
      idx = (idx + 1) % frames.length;
      show(idx);
    }, PER);

    const name = localStorage.getItem("lighthouseUserName") || "you";
    document.getElementById("user-name").textContent = name;
  });
</script>
</body>
</html>